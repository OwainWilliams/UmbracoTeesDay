<!DOCTYPE html>

<!-- 

         __  __      __  ________ ___ __     __        
|  ||\/||__)|__) /\ /  `/  \||__ |__ /__`   |  \ /\\ / 
\__/|  ||__)|  \/~~\\__,\__/||___|___.__/   |__//~~\|  
                                                       
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find out when the next #umbracoTees day is">
    <meta name="keywords" content="umbraco, umbracoteesday, umbracotees">
    <meta name="author" content="Owain Williams">
  
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="#UmbracoTees Countdown Timer">
    <meta property="og:description" content="Find out when the next #umbracoTees day is">
    <meta property="og:url" content="https://isitumbracoteesday.today">
   <!-- <meta property="og:image" content="https://isitumbracoteesday.today/images/og-image.jpg">-->
    <meta property="og:type" content="website">
  
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@owaincodes">
    <meta name="twitter:title" content="#UmbracoTees Countdown Timer">
    <meta name="twitter:description" content="Find out when the next #umbracoTees day is">
    <!-- <meta name="twitter:image" content="https://isitumbracoteesday.today/images/twitter-image.jpg">-->
  
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
<link rel="manifest" href="assets/site.webmanifest">
  <style>
    body {
      text-align: center;
      padding: 70px 50px;
      background: #0D1A29;
      font-family: "Helvetica Neue", "Open Sans", helvetica, arial, sans-serif;  
      color: #FFFFFF; /* Set text color to white */
    }

    #timer {  
      font-size: 3em;
      font-weight: 100;
      color: white;
      text-shadow: 0 0 20px #48C8FF;

      div {
        display: inline-block;
        min-width: 90px;

        span {
          color: #B1CDF1;
          display: block;
          font-size: .35em;
          font-weight: 400;
        }

      }
    }
    h1{
            font-size: 2em;
      font-weight: bold;
      margin-top: 30px; /* Add margin to the top of the h1 */
        }
  </style>
  <title>#UmbracoTees Countdown Timer</title>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="/">#UmbracoTees Day</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://umbracocommunity.store">Merch</a>
      </li>
    </ul>
  </div>
</nav>
<div class="container">
    <h1>Is it #UmbracoTees day today?</h1>
<div id="timer"></div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
function updateTimer() {
  // Fetch the JSON file containing the array of dates
  fetch('datesFolder/dates.json')
    .then(response => response.json())
    .then(data => {
      // Find the closest date in the array
      var closestDate = findClosestDate(data);

      // Check if the closest date is today
      var today = new Date();
      today.setHours(0, 0, 0, 0);

      var closestDateTime = new Date(closestDate);
      closestDateTime.setHours(0, 0, 0, 0);

      if (closestDateTime.getTime() === today.getTime()) {
        // It's today
        document.getElementById("timer").innerHTML = "#UmbracoTees day is today!";
        return;
      }

      // Calculate the countdown for the closest date
      var future = Date.parse(closestDate);
      var now = new Date();

      if (isNaN(future) || future <= now) {
        // Date has passed or not set
        document.getElementById("timer").innerHTML = 'Coming Soon';
        return;
      }

      var diff = future - now;

      var days = Math.floor(diff / (1000 * 60 * 60 * 24));
      var hours = Math.floor(diff / (1000 * 60 * 60));
      var mins = Math.floor(diff / (1000 * 60));
      var secs = Math.floor(diff / 1000);

      var d = days;
      var h = hours - days * 24;
      var m = mins - hours * 60;
      var s = secs - mins * 60;

      document.getElementById("timer").innerHTML =
        '<div>' + d + '<span>days</span></div>' +
        '<div>' + h + '<span>hours</span></div>' +
        '<div>' + m + '<span>minutes</span></div>' +
        '<div>' + s + '<span>seconds</span></div>';
    })
    .catch(error => {
      console.error('Error fetching dates:', error);
    });
}

function findClosestDate(datesArray) {
  var now = new Date();
  var closestDate = datesArray[0];

  for (var i = 1; i < datesArray.length; i++) {
    var currentDate = Date.parse(datesArray[i]);
    if (currentDate > now && currentDate < Date.parse(closestDate)) {
      closestDate = datesArray[i];
    }
  }

  return closestDate;
}

setInterval(updateTimer, 1000);
</script>


</body>
</html>
